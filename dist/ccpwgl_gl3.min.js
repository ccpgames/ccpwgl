/* ccpwgl 2016-07-11 */ 

var gl3={};gl3.EPSILON=1e-6,gl3.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,gl3.RANDOM=Math.random,gl3.ENABLE_SIMD=!1,gl3.DEG2RAD=Math.PI/180,gl3.RAD2DEG=180/Math.PI,gl3.SIMD_AVAILABLE=gl3.ARRAY_TYPE===this.Float32Array&&"SIMD"in this,gl3.USE_SIMD=gl3.ENABLE_SIMD&&gl3.SIMD_AVAILABLE,gl3.setMatrixArrayType=function(a){gl3.ARRAY_TYPE=a},gl3.degToRad=function(a){return a*gl3.DEG2RAD},gl3.radToDeg=function(a){return a*gl3.RAD2DEG},gl3.equals=function(a,b){return Math.abs(a-b)<=gl3.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))},gl3.clamp=function(a,b,c){return Math.max(b,Math.min(c,a))},gl3.isPowerOfTwo=function(a){return 0===(a&a-1)&&0!==a},gl3.nearestPowerOfTwo=function(a){return Math.pow(2,Math.round(Math.log(a)/Math.LN2))},gl3.randInt=function(a,b){return a+Math.floor(Math.random()*(b-a+1))},gl3.randFloat=function(a,b){return a+Math.random()*(b-a)},gl3.smoothStep=function(a,b,c){return b>=a?0:a>=c?1:(a=(a-b)/(c-b),a*a*(3-2*a))},gl3.smootherStep=function(a,b,c){return b>=a?0:a>=c?1:(a=(a-b)/(c-b),a*a*a*(a*(6*a-15)+10))},gl3.generateUUID=function(){var a,b="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),c=Array(36),d=0;return function(){for(var e=0;36>e;e++)8===e||13===e||18===e||23===e?c[e]="-":14===e?c[e]="4":(2>=d&&(d=33554432+16777216*Math.random()|0),a=15&d,d>>=4,c[e]=b[19===e?3&a|8:a]);return c.join("")}}();var vec3={};vec3.create=function(){var a=new gl3.ARRAY_TYPE(3);return a[0]=0,a[1]=0,a[2]=0,a},vec3.clone=function(a){var b=new gl3.ARRAY_TYPE(3);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b},vec3.fromValues=function(a,b,c){var d=new gl3.ARRAY_TYPE(3);return d[0]=a,d[1]=b,d[2]=c,d},vec3.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a},vec3.set=function(a,b,c,d){return a[0]=b,a[1]=c,a[2]=d,a},vec3.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a},vec3.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a},vec3.sub=vec3.subtract,vec3.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a[2]=b[2]*c[2],a},vec3.mul=vec3.multiply,vec3.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a[2]=b[2]/c[2],a},vec3.div=vec3.divide,vec3.ceil=function(a,b){return a[0]=Math.ceil(b[0]),a[1]=Math.ceil(b[1]),a[2]=Math.ceil(b[2]),a},vec3.floor=function(a,b){return a[0]=Math.floor(b[0]),a[1]=Math.floor(b[1]),a[2]=Math.floor(b[2]),a},vec3.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a[2]=Math.min(b[2],c[2]),a},vec3.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a[2]=Math.max(b[2],c[2]),a},vec3.round=function(a,b){return a[0]=Math.round(b[0]),a[1]=Math.round(b[1]),a[2]=Math.round(b[2]),a},vec3.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a},vec3.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a},vec3.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return Math.sqrt(c*c+d*d+e*e)},vec3.dist=vec3.distance,vec3.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return c*c+d*d+e*e},vec3.sqrDist=vec3.squaredDistance,vec3.length=function(a){var b=a[0],c=a[1],d=a[2];return Math.sqrt(b*b+c*c+d*d)},vec3.len=vec3.length,vec3.squaredLength=function(a){var b=a[0],c=a[1],d=a[2];return b*b+c*c+d*d},vec3.sqrLen=vec3.squaredLength,vec3.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a},vec3.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a[2]=1/b[2],a},vec3.normalize=function(a,b){var c=b[0],d=b[1],e=b[2],f=c*c+d*d+e*e;return f>0&&(f=1/Math.sqrt(f),a[0]=b[0]*f,a[1]=b[1]*f,a[2]=b[2]*f),a},vec3.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},vec3.cross=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2];return a[0]=e*i-f*h,a[1]=f*g-d*i,a[2]=d*h-e*g,a},vec3.lerp=function(a,b,c,d){var e=b[0],f=b[1],g=b[2];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a[2]=g+d*(c[2]-g),a},vec3.hermite=function(a,b,c,d,e,f){var g=f*f,h=g*(2*f-3)+1,i=g*(f-2)+f,j=g*(f-1),k=g*(3-2*f);return a[0]=b[0]*h+c[0]*i+d[0]*j+e[0]*k,a[1]=b[1]*h+c[1]*i+d[1]*j+e[1]*k,a[2]=b[2]*h+c[2]*i+d[2]*j+e[2]*k,a},vec3.bezier=function(a,b,c,d,e,f){var g=1-f,h=g*g,i=f*f,j=h*g,k=3*f*h,l=3*i*g,m=i*f;return a[0]=b[0]*j+c[0]*k+d[0]*l+e[0]*m,a[1]=b[1]*j+c[1]*k+d[1]*l+e[1]*m,a[2]=b[2]*j+c[2]*k+d[2]*l+e[2]*m,a},vec3.random=function(a,b){b=b||1;var c=2*gl3.RANDOM()*Math.PI,d=2*gl3.RANDOM()-1,e=Math.sqrt(1-d*d)*b;return a[0]=Math.cos(c)*e,a[1]=Math.sin(c)*e,a[2]=d*b,a},vec3.transformMat4=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[3]*d+c[7]*e+c[11]*f+c[15];return g=g||1,a[0]=(c[0]*d+c[4]*e+c[8]*f+c[12])/g,a[1]=(c[1]*d+c[5]*e+c[9]*f+c[13])/g,a[2]=(c[2]*d+c[6]*e+c[10]*f+c[14])/g,a},vec3.transformMat3=function(a,b,c){var d=b[0],e=b[1],f=b[2];return a[0]=d*c[0]+e*c[3]+f*c[6],a[1]=d*c[1]+e*c[4]+f*c[7],a[2]=d*c[2]+e*c[5]+f*c[8],a},vec3.transformQuat=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2],j=c[3],k=j*d+h*f-i*e,l=j*e+i*d-g*f,m=j*f+g*e-h*d,n=-g*d-h*e-i*f;return a[0]=k*j+n*-g+l*-i-m*-h,a[1]=l*j+n*-h+m*-g-k*-i,a[2]=m*j+n*-i+k*-h-l*-g,a},vec3.rotateX=function(a,b,c,d){var e=[],f=[];return e[0]=b[0]-c[0],e[1]=b[1]-c[1],e[2]=b[2]-c[2],f[0]=e[0],f[1]=e[1]*Math.cos(d)-e[2]*Math.sin(d),f[2]=e[1]*Math.sin(d)+e[2]*Math.cos(d),a[0]=f[0]+c[0],a[1]=f[1]+c[1],a[2]=f[2]+c[2],a},vec3.rotateY=function(a,b,c,d){var e=[],f=[];return e[0]=b[0]-c[0],e[1]=b[1]-c[1],e[2]=b[2]-c[2],f[0]=e[2]*Math.sin(d)+e[0]*Math.cos(d),f[1]=e[1],f[2]=e[2]*Math.cos(d)-e[0]*Math.sin(d),a[0]=f[0]+c[0],a[1]=f[1]+c[1],a[2]=f[2]+c[2],a},vec3.rotateZ=function(a,b,c,d){var e=[],f=[];return e[0]=b[0]-c[0],e[1]=b[1]-c[1],e[2]=b[2]-c[2],f[0]=e[0]*Math.cos(d)-e[1]*Math.sin(d),f[1]=e[0]*Math.sin(d)+e[1]*Math.cos(d),f[2]=e[2],a[0]=f[0]+c[0],a[1]=f[1]+c[1],a[2]=f[2]+c[2],a},vec3.forEach=function(){var a=vec3.create();return function(b,c,d,e,f,g){var h,i;for(c||(c=3),d||(d=0),i=e?Math.min(e*c+d,b.length):b.length,h=d;i>h;h+=c)a[0]=b[h],a[1]=b[h+1],a[2]=b[h+2],f(a,a,g),b[h]=a[0],b[h+1]=a[1],b[h+2]=a[2];return b}}(),vec3.angle=function(a,b){var c=vec3.fromValues(a[0],a[1],a[2]),d=vec3.fromValues(b[0],b[1],b[2]);vec3.normalize(c,c),vec3.normalize(d,d);var e=vec3.dot(c,d);return e>1?0:Math.acos(e)},vec3.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"},vec3.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]},vec3.equals=function(a,b){var c=a[0],d=a[1],e=a[2],f=b[0],g=b[1],h=b[2];return Math.abs(c-f)<=gl3.EPSILON*Math.max(1,Math.abs(c),Math.abs(f))&&Math.abs(d-g)<=gl3.EPSILON*Math.max(1,Math.abs(d),Math.abs(g))&&Math.abs(e-h)<=gl3.EPSILON*Math.max(1,Math.abs(e),Math.abs(h))};var vec4={};vec4.create=function(){var a=new gl3.ARRAY_TYPE(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a},vec4.clone=function(a){var b=new gl3.ARRAY_TYPE(4);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},vec4.fromValues=function(a,b,c,d){var e=new gl3.ARRAY_TYPE(4);return e[0]=a,e[1]=b,e[2]=c,e[3]=d,e},vec4.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a},vec4.set=function(a,b,c,d,e){return a[0]=b,a[1]=c,a[2]=d,a[3]=e,a},vec4.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a},vec4.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a},vec4.sub=vec4.subtract,vec4.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a[2]=b[2]*c[2],a[3]=b[3]*c[3],a},vec4.mul=vec4.multiply,vec4.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a[2]=b[2]/c[2],a[3]=b[3]/c[3],a},vec4.div=vec4.divide,vec4.ceil=function(a,b){return a[0]=Math.ceil(b[0]),a[1]=Math.ceil(b[1]),a[2]=Math.ceil(b[2]),a[3]=Math.ceil(b[3]),a},vec4.floor=function(a,b){return a[0]=Math.floor(b[0]),a[1]=Math.floor(b[1]),a[2]=Math.floor(b[2]),a[3]=Math.floor(b[3]),a},vec4.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a[2]=Math.min(b[2],c[2]),a[3]=Math.min(b[3],c[3]),a},vec4.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a[2]=Math.max(b[2],c[2]),a[3]=Math.max(b[3],c[3]),a},vec4.round=function(a,b){return a[0]=Math.round(b[0]),a[1]=Math.round(b[1]),a[2]=Math.round(b[2]),a[3]=Math.round(b[3]),a},vec4.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a},vec4.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a[3]=b[3]+c[3]*d,a},vec4.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2],f=b[3]-a[3];return Math.sqrt(c*c+d*d+e*e+f*f)},vec4.dist=vec4.distance,vec4.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2],f=b[3]-a[3];return c*c+d*d+e*e+f*f},vec4.sqrDist=vec4.squaredDistance,vec4.length=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];return Math.sqrt(b*b+c*c+d*d+e*e)},vec4.len=vec4.length,vec4.squaredLength=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];return b*b+c*c+d*d+e*e},vec4.sqrLen=vec4.squaredLength,vec4.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a[3]=-b[3],a},vec4.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a[2]=1/b[2],a[3]=1/b[3],a},vec4.normalize=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*c+d*d+e*e+f*f;return g>0&&(g=1/Math.sqrt(g),a[0]=c*g,a[1]=d*g,a[2]=e*g,a[3]=f*g),a},vec4.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},vec4.lerp=function(a,b,c,d){var e=b[0],f=b[1],g=b[2],h=b[3];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a[2]=g+d*(c[2]-g),a[3]=h+d*(c[3]-h),a},vec4.random=function(a,b){return b=b||1,a[0]=gl3.RANDOM(),a[1]=gl3.RANDOM(),a[2]=gl3.RANDOM(),a[3]=gl3.RANDOM(),vec4.normalize(a,a),vec4.scale(a,a,b),a},vec4.transformMat4=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3];return a[0]=c[0]*d+c[4]*e+c[8]*f+c[12]*g,a[1]=c[1]*d+c[5]*e+c[9]*f+c[13]*g,a[2]=c[2]*d+c[6]*e+c[10]*f+c[14]*g,a[3]=c[3]*d+c[7]*e+c[11]*f+c[15]*g,a},vec4.transformQuat=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2],j=c[3],k=j*d+h*f-i*e,l=j*e+i*d-g*f,m=j*f+g*e-h*d,n=-g*d-h*e-i*f;return a[0]=k*j+n*-g+l*-i-m*-h,a[1]=l*j+n*-h+m*-g-k*-i,a[2]=m*j+n*-i+k*-h-l*-g,a[3]=b[3],a},vec4.forEach=function(){var a=vec4.create();return function(b,c,d,e,f,g){var h,i;for(c||(c=4),d||(d=0),i=e?Math.min(e*c+d,b.length):b.length,h=d;i>h;h+=c)a[0]=b[h],a[1]=b[h+1],a[2]=b[h+2],a[3]=b[h+3],f(a,a,g),b[h]=a[0],b[h+1]=a[1],b[h+2]=a[2],b[h+3]=a[3];return b}}(),vec4.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},vec4.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]},vec4.equals=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=b[0],h=b[1],i=b[2],j=b[3];return Math.abs(c-g)<=gl3.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(d-h)<=gl3.EPSILON*Math.max(1,Math.abs(d),Math.abs(h))&&Math.abs(e-i)<=gl3.EPSILON*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(f-j)<=gl3.EPSILON*Math.max(1,Math.abs(f),Math.abs(j))};var mat3={};mat3.create=function(){var a=new gl3.ARRAY_TYPE(9);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},mat3.fromMat4=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[4],a[4]=b[5],a[5]=b[6],a[6]=b[8],a[7]=b[9],a[8]=b[10],a},mat3.clone=function(a){var b=new gl3.ARRAY_TYPE(9);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b},mat3.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a},mat3.fromValues=function(a,b,c,d,e,f,g,h,i){var j=new gl3.ARRAY_TYPE(9);return j[0]=a,j[1]=b,j[2]=c,j[3]=d,j[4]=e,j[5]=f,j[6]=g,j[7]=h,j[8]=i,j},mat3.set=function(a,b,c,d,e,f,g,h,i,j){return a[0]=b,a[1]=c,a[2]=d,a[3]=e,a[4]=f,a[5]=g,a[6]=h,a[7]=i,a[8]=j,a},mat3.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},mat3.transpose=function(a,b){if(a===b){var c=b[1],d=b[2],e=b[5];a[1]=b[3],a[2]=b[6],a[3]=c,a[5]=b[7],a[6]=d,a[7]=e}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a},mat3.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=k*g-h*j,m=-k*f+h*i,n=j*f-g*i,o=c*l+d*m+e*n;return o?(o=1/o,a[0]=l*o,a[1]=(-k*d+e*j)*o,a[2]=(h*d-e*g)*o,a[3]=m*o,a[4]=(k*c-e*i)*o,a[5]=(-h*c+e*f)*o,a[6]=n*o,a[7]=(-j*c+d*i)*o,a[8]=(g*c-d*f)*o,a):null},mat3.adjoint=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8];return a[0]=g*k-h*j,a[1]=e*j-d*k,a[2]=d*h-e*g,a[3]=h*i-f*k,a[4]=c*k-e*i,a[5]=e*f-c*h,a[6]=f*j-g*i,a[7]=d*i-c*j,a[8]=c*g-d*f,a},mat3.determinant=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8];return b*(j*f-g*i)+c*(-j*e+g*h)+d*(i*e-f*h)},mat3.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=c[0],n=c[1],o=c[2],p=c[3],q=c[4],r=c[5],s=c[6],t=c[7],u=c[8];return a[0]=m*d+n*g+o*j,a[1]=m*e+n*h+o*k,a[2]=m*f+n*i+o*l,a[3]=p*d+q*g+r*j,a[4]=p*e+q*h+r*k,a[5]=p*f+q*i+r*l,a[6]=s*d+t*g+u*j,a[7]=s*e+t*h+u*k,a[8]=s*f+t*i+u*l,a},mat3.mul=mat3.multiply,mat3.translate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=c[0],n=c[1];return a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=h,a[5]=i,a[6]=m*d+n*g+j,a[7]=m*e+n*h+k,a[8]=m*f+n*i+l,a},mat3.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=Math.sin(c),n=Math.cos(c);return a[0]=n*d+m*g,a[1]=n*e+m*h,a[2]=n*f+m*i,a[3]=n*g-m*d,a[4]=n*h-m*e,a[5]=n*i-m*f,a[6]=j,a[7]=k,a[8]=l,a},mat3.scale=function(a,b,c){var d=c[0],e=c[1];return a[0]=d*b[0],a[1]=d*b[1],a[2]=d*b[2],a[3]=e*b[3],a[4]=e*b[4],a[5]=e*b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a},mat3.fromTranslation=function(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=b[0],a[7]=b[1],a[8]=1,a},mat3.fromRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=0,a[3]=-c,a[4]=d,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},mat3.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=0,a[4]=b[1],a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},mat3.fromMat2d=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=0,a[3]=b[2],a[4]=b[3],a[5]=0,a[6]=b[4],a[7]=b[5],a[8]=1,a},mat3.fromQuat=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c+c,h=d+d,i=e+e,j=c*g,k=d*g,l=d*h,m=e*g,n=e*h,o=e*i,p=f*g,q=f*h,r=f*i;return a[0]=1-l-o,a[3]=k-r,a[6]=m+q,a[1]=k+r,a[4]=1-j-o,a[7]=n-p,a[2]=m-q,a[5]=n+p,a[8]=1-j-l,a},mat3.normalFrommat4=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15],s=c*h-d*g,t=c*i-e*g,u=c*j-f*g,v=d*i-e*h,w=d*j-f*h,x=e*j-f*i,y=k*p-l*o,z=k*q-m*o,A=k*r-n*o,B=l*q-m*p,C=l*r-n*p,D=m*r-n*q,E=s*D-t*C+u*B+v*A-w*z+x*y;return E?(E=1/E,a[0]=(h*D-i*C+j*B)*E,a[1]=(i*A-g*D-j*z)*E,a[2]=(g*C-h*A+j*y)*E,a[3]=(e*C-d*D-f*B)*E,a[4]=(c*D-e*A+f*z)*E,a[5]=(d*A-c*C-f*y)*E,a[6]=(p*x-q*w+r*v)*E,a[7]=(q*u-o*x-r*t)*E,a[8]=(o*w-p*u+r*s)*E,a):null},mat3.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"},mat3.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))},mat3.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a[4]=b[4]+c[4],a[5]=b[5]+c[5],a[6]=b[6]+c[6],a[7]=b[7]+c[7],a[8]=b[8]+c[8],a},mat3.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a[4]=b[4]-c[4],a[5]=b[5]-c[5],a[6]=b[6]-c[6],a[7]=b[7]-c[7],a[8]=b[8]-c[8],a},mat3.sub=mat3.subtract,mat3.multiplyScalar=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a[4]=b[4]*c,a[5]=b[5]*c,a[6]=b[6]*c,a[7]=b[7]*c,a[8]=b[8]*c,a},mat3.multiplyScalarAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a[3]=b[3]+c[3]*d,a[4]=b[4]+c[4]*d,a[5]=b[5]+c[5]*d,a[6]=b[6]+c[6]*d,a[7]=b[7]+c[7]*d,a[8]=b[8]+c[8]*d,a},mat3.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]},mat3.equals=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=a[6],j=a[7],k=a[8],l=b[0],m=b[1],n=b[2],o=b[3],p=b[4],q=b[5],r=a[6],s=b[7],t=b[8];return Math.abs(c-l)<=gl3.EPSILON*Math.max(1,Math.abs(c),Math.abs(l))&&Math.abs(d-m)<=gl3.EPSILON*Math.max(1,Math.abs(d),Math.abs(m))&&Math.abs(e-n)<=gl3.EPSILON*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(f-o)<=gl3.EPSILON*Math.max(1,Math.abs(f),Math.abs(o))&&Math.abs(g-p)<=gl3.EPSILON*Math.max(1,Math.abs(g),Math.abs(p))&&Math.abs(h-q)<=gl3.EPSILON*Math.max(1,Math.abs(h),Math.abs(q))&&Math.abs(i-r)<=gl3.EPSILON*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(j-s)<=gl3.EPSILON*Math.max(1,Math.abs(j),Math.abs(s))&&Math.abs(k-t)<=gl3.EPSILON*Math.max(1,Math.abs(k),Math.abs(t))};var quat={};quat.create=function(){var a=new gl3.ARRAY_TYPE(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a},quat.rotationTo=function(){var a=vec3.create(),b=vec3.fromValues(1,0,0),c=vec3.fromValues(0,1,0);return function(d,e,f){var g=vec3.dot(e,f);return-.999999>g?(vec3.cross(a,b,e),vec3.length(a)<1e-6&&vec3.cross(a,c,e),vec3.normalize(a,a),quat.setAxisAngle(d,a,Math.PI),d):g>.999999?(d[0]=0,d[1]=0,d[2]=0,d[3]=1,d):(vec3.cross(a,e,f),d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=1+g,quat.normalize(d,d))}}(),quat.setAxes=function(){var a=mat3.create();return function(b,c,d,e){return a[0]=d[0],a[3]=d[1],a[6]=d[2],a[1]=e[0],a[4]=e[1],a[7]=e[2],a[2]=-c[0],a[5]=-c[1],a[8]=-c[2],quat.normalize(b,quat.fromMat3(b,a))}}(),quat.clone=vec4.clone,quat.fromValues=vec4.fromValues,quat.copy=vec4.copy,quat.set=vec4.set,quat.identity=function(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a},quat.setAxisAngle=function(a,b,c){c=.5*c;var d=Math.sin(c);return a[0]=d*b[0],a[1]=d*b[1],a[2]=d*b[2],a[3]=Math.cos(c),a},quat.getAxisAngle=function(a,b){var c=2*Math.acos(b[3]),d=Math.sin(c/2);return 0!=d?(a[0]=b[0]/d,a[1]=b[1]/d,a[2]=b[2]/d):(a[0]=1,a[1]=0,a[2]=0),c},quat.add=vec4.add,quat.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1],j=c[2],k=c[3];return a[0]=d*k+g*h+e*j-f*i,a[1]=e*k+g*i+f*h-d*j,a[2]=f*k+g*j+d*i-e*h,a[3]=g*k-d*h-e*i-f*j,a},quat.mul=quat.multiply,quat.scale=vec4.scale,quat.rotateX=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+g*h,a[1]=e*i+f*h,a[2]=f*i-e*h,a[3]=g*i-d*h,a},quat.rotateY=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i-f*h,a[1]=e*i+g*h,a[2]=f*i+d*h,a[3]=g*i-e*h,a},quat.rotateZ=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+e*h,a[1]=e*i-d*h,a[2]=f*i+g*h,a[3]=g*i-f*h,a},quat.calculateW=function(a,b){var c=b[0],d=b[1],e=b[2];return a[0]=c,a[1]=d,a[2]=e,a[3]=Math.sqrt(Math.abs(1-c*c-d*d-e*e)),a},quat.dot=vec4.dot,quat.lerp=vec4.lerp,quat.slerp=function(a,b,c,d){var e,f,g,h,i,j=b[0],k=b[1],l=b[2],m=b[3],n=c[0],o=c[1],p=c[2],q=c[3];return f=j*n+k*o+l*p+m*q,0>f&&(f=-f,n=-n,o=-o,p=-p,q=-q),1-f>1e-6?(e=Math.acos(f),g=Math.sin(e),h=Math.sin((1-d)*e)/g,i=Math.sin(d*e)/g):(h=1-d,i=d),a[0]=h*j+i*n,a[1]=h*k+i*o,a[2]=h*l+i*p,a[3]=h*m+i*q,a},quat.sqlerp=function(){var a=quat.create(),b=quat.create();return function(c,d,e,f,g,h){return quat.slerp(a,d,g,h),quat.slerp(b,e,f,h),quat.slerp(c,a,b,2*h*(1-h)),c}}(),quat.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*c+d*d+e*e+f*f,h=g?1/g:0;return a[0]=-c*h,a[1]=-d*h,a[2]=-e*h,a[3]=f*h,a},quat.conjugate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a[3]=b[3],a},quat.length=vec4.length,quat.len=quat.length,quat.squaredLength=vec4.squaredLength,quat.sqrLen=quat.squaredLength,quat.normalize=vec4.normalize,quat.fromMat3=function(a,b){var c,d=b[0]+b[4]+b[8];if(d>0)c=Math.sqrt(d+1),a[3]=.5*c,c=.5/c,a[0]=(b[5]-b[7])*c,a[1]=(b[6]-b[2])*c,a[2]=(b[1]-b[3])*c;else{var e=0;b[4]>b[0]&&(e=1),b[8]>b[3*e+e]&&(e=2);var f=(e+1)%3,g=(e+2)%3;c=Math.sqrt(b[3*e+e]-b[3*f+f]-b[3*g+g]+1),a[e]=.5*c,c=.5/c,a[3]=(b[3*f+g]-b[3*g+f])*c,a[f]=(b[3*f+e]+b[3*e+f])*c,a[g]=(b[3*g+e]+b[3*e+g])*c}return a},quat.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},quat.exactEquals=vec4.exactEquals,quat.equals=vec4.equals;var mat4={scalar:{},SIMD:{}};mat4.create=function(){var a=new gl3.ARRAY_TYPE(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},mat4.clone=function(a){var b=new gl3.ARRAY_TYPE(16);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b},mat4.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},mat4.fromValues=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=new gl3.ARRAY_TYPE(16);return q[0]=a,q[1]=b,q[2]=c,q[3]=d,q[4]=e,q[5]=f,q[6]=g,q[7]=h,q[8]=i,q[9]=j,q[10]=k,q[11]=l,q[12]=m,q[13]=n,q[14]=o,q[15]=p,q},mat4.set=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){return a[0]=b,a[1]=c,a[2]=d,a[3]=e,a[4]=f,a[5]=g,a[6]=h,a[7]=i,a[8]=j,a[9]=k,a[10]=l,a[11]=m,a[12]=n,a[13]=o,a[14]=p,a[15]=q,a},mat4.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},mat4.scalar.transpose=function(a,b){if(a===b){var c=b[1],d=b[2],e=b[3],f=b[6],g=b[7],h=b[11];a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=c,a[6]=b[9],a[7]=b[13],a[8]=d,a[9]=f,a[11]=b[14],a[12]=e,a[13]=g,a[14]=h}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a},mat4.SIMD.transpose=function(a,b){var c,d,e,f,g,h,i,j,k,l;return c=SIMD.Float32x4.load(b,0),d=SIMD.Float32x4.load(b,4),e=SIMD.Float32x4.load(b,8),f=SIMD.Float32x4.load(b,12),g=SIMD.Float32x4.shuffle(c,d,0,1,4,5),h=SIMD.Float32x4.shuffle(e,f,0,1,4,5),i=SIMD.Float32x4.shuffle(g,h,0,2,4,6),j=SIMD.Float32x4.shuffle(g,h,1,3,5,7),SIMD.Float32x4.store(a,0,i),SIMD.Float32x4.store(a,4,j),g=SIMD.Float32x4.shuffle(c,d,2,3,6,7),h=SIMD.Float32x4.shuffle(e,f,2,3,6,7),k=SIMD.Float32x4.shuffle(g,h,0,2,4,6),l=SIMD.Float32x4.shuffle(g,h,1,3,5,7),SIMD.Float32x4.store(a,8,k),SIMD.Float32x4.store(a,12,l),a},mat4.transpose=gl3.USE_SIMD?mat4.SIMD.transpose:mat4.scalar.transpose,mat4.scalar.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15],s=c*h-d*g,t=c*i-e*g,u=c*j-f*g,v=d*i-e*h,w=d*j-f*h,x=e*j-f*i,y=k*p-l*o,z=k*q-m*o,A=k*r-n*o,B=l*q-m*p,C=l*r-n*p,D=m*r-n*q,E=s*D-t*C+u*B+v*A-w*z+x*y;return E?(E=1/E,a[0]=(h*D-i*C+j*B)*E,a[1]=(e*C-d*D-f*B)*E,a[2]=(p*x-q*w+r*v)*E,a[3]=(m*w-l*x-n*v)*E,a[4]=(i*A-g*D-j*z)*E,a[5]=(c*D-e*A+f*z)*E,a[6]=(q*u-o*x-r*t)*E,a[7]=(k*x-m*u+n*t)*E,a[8]=(g*C-h*A+j*y)*E,a[9]=(d*A-c*C-f*y)*E,a[10]=(o*w-p*u+r*s)*E,a[11]=(l*u-k*w-n*s)*E,a[12]=(h*z-g*B-i*y)*E,a[13]=(c*B-d*z+e*y)*E,a[14]=(p*t-o*v-q*s)*E,a[15]=(k*v-l*t+m*s)*E,a):null},mat4.SIMD.invert=function(a,b){var c,d,e,f,g,h,i,j,k,l,m=SIMD.Float32x4.load(b,0),n=SIMD.Float32x4.load(b,4),o=SIMD.Float32x4.load(b,8),p=SIMD.Float32x4.load(b,12);return g=SIMD.Float32x4.shuffle(m,n,0,1,4,5),d=SIMD.Float32x4.shuffle(o,p,0,1,4,5),c=SIMD.Float32x4.shuffle(g,d,0,2,4,6),d=SIMD.Float32x4.shuffle(d,g,1,3,5,7),g=SIMD.Float32x4.shuffle(m,n,2,3,6,7),f=SIMD.Float32x4.shuffle(o,p,2,3,6,7),e=SIMD.Float32x4.shuffle(g,f,0,2,4,6),f=SIMD.Float32x4.shuffle(f,g,1,3,5,7),g=SIMD.Float32x4.mul(e,f),g=SIMD.Float32x4.swizzle(g,1,0,3,2),h=SIMD.Float32x4.mul(d,g),i=SIMD.Float32x4.mul(c,g),g=SIMD.Float32x4.swizzle(g,2,3,0,1),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,g),h),i=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,g),i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),g=SIMD.Float32x4.mul(d,e),g=SIMD.Float32x4.swizzle(g,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,g),h),k=SIMD.Float32x4.mul(c,g),g=SIMD.Float32x4.swizzle(g,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(f,g)),k=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,g),k),k=SIMD.Float32x4.swizzle(k,2,3,0,1),g=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,3,0,1),f),g=SIMD.Float32x4.swizzle(g,1,0,3,2),e=SIMD.Float32x4.swizzle(e,2,3,0,1),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,g),h),j=SIMD.Float32x4.mul(c,g),g=SIMD.Float32x4.swizzle(g,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(e,g)),j=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,g),j),j=SIMD.Float32x4.swizzle(j,2,3,0,1),g=SIMD.Float32x4.mul(c,d),g=SIMD.Float32x4.swizzle(g,1,0,3,2),j=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,g),j),k=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,g),k),g=SIMD.Float32x4.swizzle(g,2,3,0,1),j=SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,g),j),k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(e,g)),g=SIMD.Float32x4.mul(c,f),g=SIMD.Float32x4.swizzle(g,1,0,3,2),i=SIMD.Float32x4.sub(i,SIMD.Float32x4.mul(e,g)),j=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,g),j),g=SIMD.Float32x4.swizzle(g,2,3,0,1),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,g),i),j=SIMD.Float32x4.sub(j,SIMD.Float32x4.mul(d,g)),g=SIMD.Float32x4.mul(c,e),g=SIMD.Float32x4.swizzle(g,1,0,3,2),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,g),i),k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(d,g)),g=SIMD.Float32x4.swizzle(g,2,3,0,1),i=SIMD.Float32x4.sub(i,SIMD.Float32x4.mul(f,g)),k=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,g),k),l=SIMD.Float32x4.mul(c,h),l=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(l,2,3,0,1),l),l=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(l,1,0,3,2),l),g=SIMD.Float32x4.reciprocalApproximation(l),l=SIMD.Float32x4.sub(SIMD.Float32x4.add(g,g),SIMD.Float32x4.mul(l,SIMD.Float32x4.mul(g,g))),(l=SIMD.Float32x4.swizzle(l,0,0,0,0))?(SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(l,h)),SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(l,i)),SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(l,j)),SIMD.Float32x4.store(a,12,SIMD.Float32x4.mul(l,k)),a):null},mat4.invert=gl3.USE_SIMD?mat4.SIMD.invert:mat4.scalar.invert,mat4.scalar.adjoint=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15];return a[0]=h*(m*r-n*q)-l*(i*r-j*q)+p*(i*n-j*m),a[1]=-(d*(m*r-n*q)-l*(e*r-f*q)+p*(e*n-f*m)),a[2]=d*(i*r-j*q)-h*(e*r-f*q)+p*(e*j-f*i),a[3]=-(d*(i*n-j*m)-h*(e*n-f*m)+l*(e*j-f*i)),a[4]=-(g*(m*r-n*q)-k*(i*r-j*q)+o*(i*n-j*m)),a[5]=c*(m*r-n*q)-k*(e*r-f*q)+o*(e*n-f*m),a[6]=-(c*(i*r-j*q)-g*(e*r-f*q)+o*(e*j-f*i)),a[7]=c*(i*n-j*m)-g*(e*n-f*m)+k*(e*j-f*i),a[8]=g*(l*r-n*p)-k*(h*r-j*p)+o*(h*n-j*l),a[9]=-(c*(l*r-n*p)-k*(d*r-f*p)+o*(d*n-f*l)),a[10]=c*(h*r-j*p)-g*(d*r-f*p)+o*(d*j-f*h),a[11]=-(c*(h*n-j*l)-g*(d*n-f*l)+k*(d*j-f*h)),a[12]=-(g*(l*q-m*p)-k*(h*q-i*p)+o*(h*m-i*l)),a[13]=c*(l*q-m*p)-k*(d*q-e*p)+o*(d*m-e*l),a[14]=-(c*(h*q-i*p)-g*(d*q-e*p)+o*(d*i-e*h)),a[15]=c*(h*m-i*l)-g*(d*m-e*l)+k*(d*i-e*h),a},mat4.SIMD.adjoint=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o;return c=SIMD.Float32x4.load(b,0),d=SIMD.Float32x4.load(b,4),e=SIMD.Float32x4.load(b,8),f=SIMD.Float32x4.load(b,12),k=SIMD.Float32x4.shuffle(c,d,0,1,4,5),h=SIMD.Float32x4.shuffle(e,f,0,1,4,5),g=SIMD.Float32x4.shuffle(k,h,0,2,4,6),h=SIMD.Float32x4.shuffle(h,k,1,3,5,7),k=SIMD.Float32x4.shuffle(c,d,2,3,6,7),j=SIMD.Float32x4.shuffle(e,f,2,3,6,7),i=SIMD.Float32x4.shuffle(k,j,0,2,4,6),j=SIMD.Float32x4.shuffle(j,k,1,3,5,7),k=SIMD.Float32x4.mul(i,j),k=SIMD.Float32x4.swizzle(k,1,0,3,2),l=SIMD.Float32x4.mul(h,k),m=SIMD.Float32x4.mul(g,k),k=SIMD.Float32x4.swizzle(k,2,3,0,1),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,k),l),m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,k),m),m=SIMD.Float32x4.swizzle(m,2,3,0,1),k=SIMD.Float32x4.mul(h,i),k=SIMD.Float32x4.swizzle(k,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(j,k),l),o=SIMD.Float32x4.mul(g,k),k=SIMD.Float32x4.swizzle(k,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(j,k)),o=SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,k),o),o=SIMD.Float32x4.swizzle(o,2,3,0,1),k=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,2,3,0,1),j),k=SIMD.Float32x4.swizzle(k,1,0,3,2),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,k),l),n=SIMD.Float32x4.mul(g,k),k=SIMD.Float32x4.swizzle(k,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(i,k)),n=SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,k),n),n=SIMD.Float32x4.swizzle(n,2,3,0,1),k=SIMD.Float32x4.mul(g,h),k=SIMD.Float32x4.swizzle(k,1,0,3,2),n=SIMD.Float32x4.add(SIMD.Float32x4.mul(j,k),n),o=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,k),o),k=SIMD.Float32x4.swizzle(k,2,3,0,1),n=SIMD.Float32x4.sub(SIMD.Float32x4.mul(j,k),n),o=SIMD.Float32x4.sub(o,SIMD.Float32x4.mul(i,k)),k=SIMD.Float32x4.mul(g,j),k=SIMD.Float32x4.swizzle(k,1,0,3,2),m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(i,k)),n=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,k),n),k=SIMD.Float32x4.swizzle(k,2,3,0,1),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,k),m),n=SIMD.Float32x4.sub(n,SIMD.Float32x4.mul(h,k)),k=SIMD.Float32x4.mul(g,i),k=SIMD.Float32x4.swizzle(k,1,0,3,2),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(j,k),m),o=SIMD.Float32x4.sub(o,SIMD.Float32x4.mul(h,k)),k=SIMD.Float32x4.swizzle(k,2,3,0,1),m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(j,k)),o=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,k),o),SIMD.Float32x4.store(a,0,l),SIMD.Float32x4.store(a,4,m),SIMD.Float32x4.store(a,8,n),SIMD.Float32x4.store(a,12,o),a},mat4.adjoint=gl3.USE_SIMD?mat4.SIMD.adjoint:mat4.scalar.adjoint,mat4.determinant=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8],k=a[9],l=a[10],m=a[11],n=a[12],o=a[13],p=a[14],q=a[15],r=b*g-c*f,s=b*h-d*f,t=b*i-e*f,u=c*h-d*g,v=c*i-e*g,w=d*i-e*h,x=j*o-k*n,y=j*p-l*n,z=j*q-m*n,A=k*p-l*o,B=k*q-m*o,C=l*q-m*p;return r*C-s*B+t*A+u*z-v*y+w*x},mat4.SIMD.multiply=function(a,b,c){var d=SIMD.Float32x4.load(b,0),e=SIMD.Float32x4.load(b,4),f=SIMD.Float32x4.load(b,8),g=SIMD.Float32x4.load(b,12),h=SIMD.Float32x4.load(c,0),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,0,0,0,0),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,3,3,3,3),g))));SIMD.Float32x4.store(a,0,i);var j=SIMD.Float32x4.load(c,4),k=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(j,0,0,0,0),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(j,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(j,2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(j,3,3,3,3),g))));SIMD.Float32x4.store(a,4,k);var l=SIMD.Float32x4.load(c,8),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),g))));SIMD.Float32x4.store(a,8,m);var n=SIMD.Float32x4.load(c,12),o=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,0,0,0,0),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,3,3,3,3),g))));return SIMD.Float32x4.store(a,12,o),a},mat4.scalar.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],p=b[12],q=b[13],r=b[14],s=b[15],t=c[0],u=c[1],v=c[2],w=c[3];return a[0]=t*d+u*h+v*l+w*p,a[1]=t*e+u*i+v*m+w*q,a[2]=t*f+u*j+v*n+w*r,a[3]=t*g+u*k+v*o+w*s,t=c[4],u=c[5],v=c[6],w=c[7],a[4]=t*d+u*h+v*l+w*p,a[5]=t*e+u*i+v*m+w*q,a[6]=t*f+u*j+v*n+w*r,a[7]=t*g+u*k+v*o+w*s,t=c[8],u=c[9],v=c[10],w=c[11],a[8]=t*d+u*h+v*l+w*p,a[9]=t*e+u*i+v*m+w*q,a[10]=t*f+u*j+v*n+w*r,a[11]=t*g+u*k+v*o+w*s,t=c[12],u=c[13],v=c[14],w=c[15],a[12]=t*d+u*h+v*l+w*p,a[13]=t*e+u*i+v*m+w*q,a[14]=t*f+u*j+v*n+w*r,a[15]=t*g+u*k+v*o+w*s,a},mat4.multiply=gl3.USE_SIMD?mat4.SIMD.multiply:mat4.scalar.multiply,mat4.mul=mat4.multiply,mat4.scalar.translate=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p=c[0],q=c[1],r=c[2];return b===a?(a[12]=b[0]*p+b[4]*q+b[8]*r+b[12],a[13]=b[1]*p+b[5]*q+b[9]*r+b[13],a[14]=b[2]*p+b[6]*q+b[10]*r+b[14],a[15]=b[3]*p+b[7]*q+b[11]*r+b[15]):(d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],
n=b[10],o=b[11],a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=h,a[5]=i,a[6]=j,a[7]=k,a[8]=l,a[9]=m,a[10]=n,a[11]=o,a[12]=d*p+h*q+l*r+b[12],a[13]=e*p+i*q+m*r+b[13],a[14]=f*p+j*q+n*r+b[14],a[15]=g*p+k*q+o*r+b[15]),a},mat4.SIMD.translate=function(a,b,c){var d=SIMD.Float32x4.load(b,0),e=SIMD.Float32x4.load(b,4),f=SIMD.Float32x4.load(b,8),g=SIMD.Float32x4.load(b,12),h=SIMD.Float32x4(c[0],c[1],c[2],0);b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11]),d=SIMD.Float32x4.mul(d,SIMD.Float32x4.swizzle(h,0,0,0,0)),e=SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(h,1,1,1,1)),f=SIMD.Float32x4.mul(f,SIMD.Float32x4.swizzle(h,2,2,2,2));var i=SIMD.Float32x4.add(d,SIMD.Float32x4.add(e,SIMD.Float32x4.add(f,g)));return SIMD.Float32x4.store(a,12,i),a},mat4.translate=gl3.USE_SIMD?mat4.SIMD.translate:mat4.scalar.translate,mat4.scalar.scale=function(a,b,c){var d=c[0],e=c[1],f=c[2];return a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d,a[3]=b[3]*d,a[4]=b[4]*e,a[5]=b[5]*e,a[6]=b[6]*e,a[7]=b[7]*e,a[8]=b[8]*f,a[9]=b[9]*f,a[10]=b[10]*f,a[11]=b[11]*f,a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},mat4.SIMD.scale=function(a,b,c){var d,e,f,g=SIMD.Float32x4(c[0],c[1],c[2],0);return d=SIMD.Float32x4.load(b,0),SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(d,SIMD.Float32x4.swizzle(g,0,0,0,0))),e=SIMD.Float32x4.load(b,4),SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(g,1,1,1,1))),f=SIMD.Float32x4.load(b,8),SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(f,SIMD.Float32x4.swizzle(g,2,2,2,2))),a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},mat4.scale=gl3.USE_SIMD?mat4.SIMD.scale:mat4.scalar.scale,mat4.rotate=function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C=d[0],D=d[1],E=d[2],F=Math.sqrt(C*C+D*D+E*E);return Math.abs(F)<gl3.EPSILON?null:(F=1/F,C*=F,D*=F,E*=F,e=Math.sin(c),f=Math.cos(c),g=1-f,h=b[0],i=b[1],j=b[2],k=b[3],l=b[4],m=b[5],n=b[6],o=b[7],p=b[8],q=b[9],r=b[10],s=b[11],t=C*C*g+f,u=D*C*g+E*e,v=E*C*g-D*e,w=C*D*g-E*e,x=D*D*g+f,y=E*D*g+C*e,z=C*E*g+D*e,A=D*E*g-C*e,B=E*E*g+f,a[0]=h*t+l*u+p*v,a[1]=i*t+m*u+q*v,a[2]=j*t+n*u+r*v,a[3]=k*t+o*u+s*v,a[4]=h*w+l*x+p*y,a[5]=i*w+m*x+q*y,a[6]=j*w+n*x+r*y,a[7]=k*w+o*x+s*y,a[8]=h*z+l*A+p*B,a[9]=i*z+m*A+q*B,a[10]=j*z+n*A+r*B,a[11]=k*z+o*A+s*B,b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a)},mat4.scalar.rotateX=function(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[4],g=b[5],h=b[6],i=b[7],j=b[8],k=b[9],l=b[10],m=b[11];return b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[4]=f*e+j*d,a[5]=g*e+k*d,a[6]=h*e+l*d,a[7]=i*e+m*d,a[8]=j*e-f*d,a[9]=k*e-g*d,a[10]=l*e-h*d,a[11]=m*e-i*d,a},mat4.SIMD.rotateX=function(a,b,c){var d=SIMD.Float32x4.splat(Math.sin(c)),e=SIMD.Float32x4.splat(Math.cos(c));b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var f=SIMD.Float32x4.load(b,4),g=SIMD.Float32x4.load(b,8);return SIMD.Float32x4.store(a,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(f,e),SIMD.Float32x4.mul(g,d))),SIMD.Float32x4.store(a,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,e),SIMD.Float32x4.mul(f,d))),a},mat4.rotateX=gl3.USE_SIMD?mat4.SIMD.rotateX:mat4.scalar.rotateX,mat4.scalar.rotateY=function(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[0],g=b[1],h=b[2],i=b[3],j=b[8],k=b[9],l=b[10],m=b[11];return b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=f*e-j*d,a[1]=g*e-k*d,a[2]=h*e-l*d,a[3]=i*e-m*d,a[8]=f*d+j*e,a[9]=g*d+k*e,a[10]=h*d+l*e,a[11]=i*d+m*e,a},mat4.SIMD.rotateY=function(a,b,c){var d=SIMD.Float32x4.splat(Math.sin(c)),e=SIMD.Float32x4.splat(Math.cos(c));b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var f=SIMD.Float32x4.load(b,0),g=SIMD.Float32x4.load(b,8);return SIMD.Float32x4.store(a,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,e),SIMD.Float32x4.mul(g,d))),SIMD.Float32x4.store(a,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(f,d),SIMD.Float32x4.mul(g,e))),a},mat4.rotateY=gl3.USE_SIMD?mat4.SIMD.rotateY:mat4.scalar.rotateY,mat4.scalar.rotateZ=function(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[0],g=b[1],h=b[2],i=b[3],j=b[4],k=b[5],l=b[6],m=b[7];return b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=f*e+j*d,a[1]=g*e+k*d,a[2]=h*e+l*d,a[3]=i*e+m*d,a[4]=j*e-f*d,a[5]=k*e-g*d,a[6]=l*e-h*d,a[7]=m*e-i*d,a},mat4.SIMD.rotateZ=function(a,b,c){var d=SIMD.Float32x4.splat(Math.sin(c)),e=SIMD.Float32x4.splat(Math.cos(c));b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var f=SIMD.Float32x4.load(b,0),g=SIMD.Float32x4.load(b,4);return SIMD.Float32x4.store(a,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(f,e),SIMD.Float32x4.mul(g,d))),SIMD.Float32x4.store(a,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,e),SIMD.Float32x4.mul(f,d))),a},mat4.rotateZ=gl3.USE_SIMD?mat4.SIMD.rotateZ:mat4.scalar.rotateZ,mat4.fromTranslation=function(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=b[0],a[13]=b[1],a[14]=b[2],a[15]=1,a},mat4.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=b[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=b[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},mat4.fromRotation=function(a,b,c){var d,e,f,g=c[0],h=c[1],i=c[2],j=Math.sqrt(g*g+h*h+i*i);return Math.abs(j)<gl3.EPSILON?null:(j=1/j,g*=j,h*=j,i*=j,d=Math.sin(b),e=Math.cos(b),f=1-e,a[0]=g*g*f+e,a[1]=h*g*f+i*d,a[2]=i*g*f-h*d,a[3]=0,a[4]=g*h*f-i*d,a[5]=h*h*f+e,a[6]=i*h*f+g*d,a[7]=0,a[8]=g*i*f+h*d,a[9]=h*i*f-g*d,a[10]=i*i*f+e,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)},mat4.fromXRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=d,a[6]=c,a[7]=0,a[8]=0,a[9]=-c,a[10]=d,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},mat4.fromYRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=0,a[2]=-c,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=c,a[9]=0,a[10]=d,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},mat4.fromZRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=0,a[3]=0,a[4]=-c,a[5]=d,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},mat4.fromRotationTranslation=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=d+d,i=e+e,j=f+f,k=d*h,l=d*i,m=d*j,n=e*i,o=e*j,p=f*j,q=g*h,r=g*i,s=g*j;return a[0]=1-(n+p),a[1]=l+s,a[2]=m-r,a[3]=0,a[4]=l-s,a[5]=1-(k+p),a[6]=o+q,a[7]=0,a[8]=m+r,a[9]=o-q,a[10]=1-(k+n),a[11]=0,a[12]=c[0],a[13]=c[1],a[14]=c[2],a[15]=1,a},mat4.getTranslation=function(a,b){return a[0]=b[12],a[1]=b[13],a[2]=b[14],a},mat4.getRotation=function(a,b){var c=b[0]+b[5]+b[10],d=0;return c>0?(d=2*Math.sqrt(c+1),a[3]=.25*d,a[0]=(b[6]-b[9])/d,a[1]=(b[8]-b[2])/d,a[2]=(b[1]-b[4])/d):b[0]>b[5]&b[0]>b[10]?(d=2*Math.sqrt(1+b[0]-b[5]-b[10]),a[3]=(b[6]-b[9])/d,a[0]=.25*d,a[1]=(b[1]+b[4])/d,a[2]=(b[8]+b[2])/d):b[5]>b[10]?(d=2*Math.sqrt(1+b[5]-b[0]-b[10]),a[3]=(b[8]-b[2])/d,a[0]=(b[1]+b[4])/d,a[1]=.25*d,a[2]=(b[6]+b[9])/d):(d=2*Math.sqrt(1+b[10]-b[0]-b[5]),a[3]=(b[1]-b[4])/d,a[0]=(b[8]+b[2])/d,a[1]=(b[6]+b[9])/d,a[2]=.25*d),a},mat4.fromRotationTranslationScale=function(a,b,c,d){var e=b[0],f=b[1],g=b[2],h=b[3],i=e+e,j=f+f,k=g+g,l=e*i,m=e*j,n=e*k,o=f*j,p=f*k,q=g*k,r=h*i,s=h*j,t=h*k,u=d[0],v=d[1],w=d[2];return a[0]=(1-(o+q))*u,a[1]=(m+t)*u,a[2]=(n-s)*u,a[3]=0,a[4]=(m-t)*v,a[5]=(1-(l+q))*v,a[6]=(p+r)*v,a[7]=0,a[8]=(n+s)*w,a[9]=(p-r)*w,a[10]=(1-(l+o))*w,a[11]=0,a[12]=c[0],a[13]=c[1],a[14]=c[2],a[15]=1,a},mat4.fromRotationTranslationScaleOrigin=function(a,b,c,d,e){var f=b[0],g=b[1],h=b[2],i=b[3],j=f+f,k=g+g,l=h+h,m=f*j,n=f*k,o=f*l,p=g*k,q=g*l,r=h*l,s=i*j,t=i*k,u=i*l,v=d[0],w=d[1],x=d[2],y=e[0],z=e[1],A=e[2];return a[0]=(1-(p+r))*v,a[1]=(n+u)*v,a[2]=(o-t)*v,a[3]=0,a[4]=(n-u)*w,a[5]=(1-(m+r))*w,a[6]=(q+s)*w,a[7]=0,a[8]=(o+t)*x,a[9]=(q-s)*x,a[10]=(1-(m+p))*x,a[11]=0,a[12]=c[0]+y-(a[0]*y+a[4]*z+a[8]*A),a[13]=c[1]+z-(a[1]*y+a[5]*z+a[9]*A),a[14]=c[2]+A-(a[2]*y+a[6]*z+a[10]*A),a[15]=1,a},mat4.fromQuat=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c+c,h=d+d,i=e+e,j=c*g,k=d*g,l=d*h,m=e*g,n=e*h,o=e*i,p=f*g,q=f*h,r=f*i;return a[0]=1-l-o,a[1]=k+r,a[2]=m-q,a[3]=0,a[4]=k-r,a[5]=1-j-o,a[6]=n+p,a[7]=0,a[8]=m+q,a[9]=n-p,a[10]=1-j-l,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},mat4.frustum=function(a,b,c,d,e,f,g){var h=1/(c-b),i=1/(e-d),j=1/(f-g);return a[0]=2*f*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*f*i,a[6]=0,a[7]=0,a[8]=(c+b)*h,a[9]=(e+d)*i,a[10]=(g+f)*j,a[11]=-1,a[12]=0,a[13]=0,a[14]=g*f*2*j,a[15]=0,a},mat4.perspective=function(a,b,c,d,e){var f=1/Math.tan(b/2),g=1/(d-e);return a[0]=f/c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=f,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(e+d)*g,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*e*d*g,a[15]=0,a},mat4.perspectiveFromFieldOfView=function(a,b,c,d){var e=Math.tan(b.upDegrees*Math.PI/180),f=Math.tan(b.downDegrees*Math.PI/180),g=Math.tan(b.leftDegrees*Math.PI/180),h=Math.tan(b.rightDegrees*Math.PI/180),i=2/(g+h),j=2/(e+f);return a[0]=i,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=j,a[6]=0,a[7]=0,a[8]=-((g-h)*i*.5),a[9]=(e-f)*j*.5,a[10]=d/(c-d),a[11]=-1,a[12]=0,a[13]=0,a[14]=d*c/(c-d),a[15]=0,a},mat4.ortho=function(a,b,c,d,e,f,g){var h=1/(b-c),i=1/(d-e),j=1/(f-g);return a[0]=-2*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*i,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*j,a[11]=0,a[12]=(b+c)*h,a[13]=(e+d)*i,a[14]=(g+f)*j,a[15]=1,a},mat4.lookAt=function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o=b[0],p=b[1],q=b[2],r=d[0],s=d[1],t=d[2],u=c[0],v=c[1],w=c[2];return Math.abs(o-u)<gl3.EPSILON&&Math.abs(p-v)<gl3.EPSILON&&Math.abs(q-w)<gl3.EPSILON?mat4.identity(a):(k=o-u,l=p-v,m=q-w,n=1/Math.sqrt(k*k+l*l+m*m),k*=n,l*=n,m*=n,e=s*m-t*l,f=t*k-r*m,g=r*l-s*k,n=Math.sqrt(e*e+f*f+g*g),n?(n=1/n,e*=n,f*=n,g*=n):(e=0,f=0,g=0),h=l*g-m*f,i=m*e-k*g,j=k*f-l*e,n=Math.sqrt(h*h+i*i+j*j),n?(n=1/n,h*=n,i*=n,j*=n):(h=0,i=0,j=0),a[0]=e,a[1]=h,a[2]=k,a[3]=0,a[4]=f,a[5]=i,a[6]=l,a[7]=0,a[8]=g,a[9]=j,a[10]=m,a[11]=0,a[12]=-(e*o+f*p+g*q),a[13]=-(h*o+i*p+j*q),a[14]=-(k*o+l*p+m*q),a[15]=1,a)},mat4.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"},mat4.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))},mat4.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a[4]=b[4]+c[4],a[5]=b[5]+c[5],a[6]=b[6]+c[6],a[7]=b[7]+c[7],a[8]=b[8]+c[8],a[9]=b[9]+c[9],a[10]=b[10]+c[10],a[11]=b[11]+c[11],a[12]=b[12]+c[12],a[13]=b[13]+c[13],a[14]=b[14]+c[14],a[15]=b[15]+c[15],a},mat4.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a[4]=b[4]-c[4],a[5]=b[5]-c[5],a[6]=b[6]-c[6],a[7]=b[7]-c[7],a[8]=b[8]-c[8],a[9]=b[9]-c[9],a[10]=b[10]-c[10],a[11]=b[11]-c[11],a[12]=b[12]-c[12],a[13]=b[13]-c[13],a[14]=b[14]-c[14],a[15]=b[15]-c[15],a},mat4.sub=mat4.subtract,mat4.multiplyScalar=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a[4]=b[4]*c,a[5]=b[5]*c,a[6]=b[6]*c,a[7]=b[7]*c,a[8]=b[8]*c,a[9]=b[9]*c,a[10]=b[10]*c,a[11]=b[11]*c,a[12]=b[12]*c,a[13]=b[13]*c,a[14]=b[14]*c,a[15]=b[15]*c,a},mat4.multiplyScalarAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a[3]=b[3]+c[3]*d,a[4]=b[4]+c[4]*d,a[5]=b[5]+c[5]*d,a[6]=b[6]+c[6]*d,a[7]=b[7]+c[7]*d,a[8]=b[8]+c[8]*d,a[9]=b[9]+c[9]*d,a[10]=b[10]+c[10]*d,a[11]=b[11]+c[11]*d,a[12]=b[12]+c[12]*d,a[13]=b[13]+c[13]*d,a[14]=b[14]+c[14]*d,a[15]=b[15]+c[15]*d,a},mat4.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]},mat4.equals=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=a[6],j=a[7],k=a[8],l=a[9],m=a[10],n=a[11],o=a[12],p=a[13],q=a[14],r=a[15],s=b[0],t=b[1],u=b[2],v=b[3],w=b[4],x=b[5],y=b[6],z=b[7],A=b[8],B=b[9],C=b[10],D=b[11],E=b[12],F=b[13],G=b[14],H=b[15];return Math.abs(c-s)<=gl3.EPSILON*Math.max(1,Math.abs(c),Math.abs(s))&&Math.abs(d-t)<=gl3.EPSILON*Math.max(1,Math.abs(d),Math.abs(t))&&Math.abs(e-u)<=gl3.EPSILON*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(f-v)<=gl3.EPSILON*Math.max(1,Math.abs(f),Math.abs(v))&&Math.abs(g-w)<=gl3.EPSILON*Math.max(1,Math.abs(g),Math.abs(w))&&Math.abs(h-x)<=gl3.EPSILON*Math.max(1,Math.abs(h),Math.abs(x))&&Math.abs(i-y)<=gl3.EPSILON*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(j-z)<=gl3.EPSILON*Math.max(1,Math.abs(j),Math.abs(z))&&Math.abs(k-A)<=gl3.EPSILON*Math.max(1,Math.abs(k),Math.abs(A))&&Math.abs(l-B)<=gl3.EPSILON*Math.max(1,Math.abs(l),Math.abs(B))&&Math.abs(m-C)<=gl3.EPSILON*Math.max(1,Math.abs(m),Math.abs(C))&&Math.abs(n-D)<=gl3.EPSILON*Math.max(1,Math.abs(n),Math.abs(D))&&Math.abs(o-E)<=gl3.EPSILON*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(p-F)<=gl3.EPSILON*Math.max(1,Math.abs(p),Math.abs(F))&&Math.abs(q-G)<=gl3.EPSILON*Math.max(1,Math.abs(q),Math.abs(G))&&Math.abs(r-H)<=gl3.EPSILON*Math.max(1,Math.abs(r),Math.abs(H))};var vec2={};vec2.create=function(){var a=new gl3.ARRAY_TYPE(2);return a[0]=0,a[1]=0,a},vec2.clone=function(a){var b=new gl3.ARRAY_TYPE(2);return b[0]=a[0],b[1]=a[1],b},vec2.fromValues=function(a,b){var c=new gl3.ARRAY_TYPE(2);return c[0]=a,c[1]=b,c},vec2.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a},vec2.set=function(a,b,c){return a[0]=b,a[1]=c,a},vec2.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a},vec2.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a},vec2.sub=vec2.subtract,vec2.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a},vec2.mul=vec2.multiply,vec2.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a},vec2.div=vec2.divide,vec2.ceil=function(a,b){return a[0]=Math.ceil(b[0]),a[1]=Math.ceil(b[1]),a},vec2.floor=function(a,b){return a[0]=Math.floor(b[0]),a[1]=Math.floor(b[1]),a},vec2.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a},vec2.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a},vec2.round=function(a,b){return a[0]=Math.round(b[0]),a[1]=Math.round(b[1]),a},vec2.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a},vec2.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a},vec2.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*c+d*d)},vec2.dist=vec2.distance,vec2.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return c*c+d*d},vec2.sqrDist=vec2.squaredDistance,vec2.length=function(a){var b=a[0],c=a[1];return Math.sqrt(b*b+c*c)},vec2.len=vec2.length,vec2.squaredLength=function(a){var b=a[0],c=a[1];return b*b+c*c},vec2.sqrLen=vec2.squaredLength,vec2.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a},vec2.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a},vec2.normalize=function(a,b){var c=b[0],d=b[1],e=c*c+d*d;return e>0&&(e=1/Math.sqrt(e),a[0]=b[0]*e,a[1]=b[1]*e),a},vec2.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]},vec2.cross=function(a,b,c){var d=b[0]*c[1]-b[1]*c[0];return a[0]=a[1]=0,a[2]=d,a},vec2.lerp=function(a,b,c,d){var e=b[0],f=b[1];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a},vec2.random=function(a,b){b=b||1;var c=2*gl3.RANDOM()*Math.PI;return a[0]=Math.cos(c)*b,a[1]=Math.sin(c)*b,a},vec2.transformMat2=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[2]*e,a[1]=c[1]*d+c[3]*e,a},vec2.transformMat2d=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[2]*e+c[4],a[1]=c[1]*d+c[3]*e+c[5],a},vec2.transformMat3=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[3]*e+c[6],a[1]=c[1]*d+c[4]*e+c[7],a},vec2.transformmat4=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[4]*e+c[12],a[1]=c[1]*d+c[5]*e+c[13],a},vec2.forEach=function(){var a=vec2.create();return function(b,c,d,e,f,g){var h,i;for(c||(c=2),d||(d=0),i=e?Math.min(e*c+d,b.length):b.length,h=d;i>h;h+=c)a[0]=b[h],a[1]=b[h+1],f(a,a,g),b[h]=a[0],b[h+1]=a[1];return b}}(),vec2.str=function(a){return"vec2("+a[0]+", "+a[1]+")"},vec2.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]},vec2.equals=function(a,b){var c=a[0],d=a[1],e=b[0],f=b[1];return Math.abs(c-e)<=gl3.EPSILON*Math.max(1,Math.abs(c),Math.abs(e))&&Math.abs(d-f)<=gl3.EPSILON*Math.max(1,Math.abs(d),Math.abs(f))},vec2.fromScalar=function(a){var b=new gl3.ARRAY_TYPE(2);return b[0]=a,b[1]=a,b},vec2.setScalar=function(a,b){return a[0]=b,a[1]=b,a},vec2.fill=vec2.setScalar,vec2.addScalar=function(a,b,c){return a[0]=b[0]+=c,a[1]=b[1]+=c,a},vec2.subtractScalar=function(a,b,c){return a[0]=b[0]-=c,a[1]=b[1]-=c,a},vec2.subScalar=vec2.subtractScalar,vec2.multiplyScalar=function(a,b,c){return isFinite(c)?(a[0]=b[0]*=c,a[1]=b[1]*=c):(a[0]=0,a[1]=0),a},vec2.mulScalar=vec2.multiplyScalar,vec2.divideScalar=function(a,b,c){return vec2.multiplyScalar(a,b,1/c),a},vec2.divScalar=vec2.divideScalar,vec2.minScalar=function(a,b,c){return a[0]=Math.min(b[0],c),a[1]=Math.min(b[1],c),a},vec2.maxScalar=function(a,b,c){return a[0]=Math.max(b[0],c),a[1]=Math.max(b[1],c),a},vec2.fromArray=function(a,b){var c=new gl3.ARRAY_TYPE(2);return b||(b=0),c[0]=a[b+0],c[1]=a[b+1],c},vec2.setArray=function(a,b,c){return void 0===c&&(c=0),a[0]=b[c+0],a[1]=b[c+1],a},vec2.roundToZero=function(a,b){return a[0]=b[0]<0?Math.ceil(b[0]):Math.floor(b[0]),a[1]=b[1]<0?Math.ceil(b[1]):Math.floor(b[1]),a},vec2.clamp=function(a,b,c,d){return a[0]=Math.max(c[0],Math.min(d[0],b[0])),a[1]=Math.max(c[1],Math.min(d[1],b[1])),a},vec2.clampScalar=function(a,b,c,d){return a[0]=Math.max(c,Math.min(d,b[0])),a[1]=Math.max(c,Math.min(d,b[1])),a},vec2.lengthManhattan=function(a){return Math.abs(a[0])+Math.abs(a[1])},vec2.lenMan=vec2.lengthManhattan,vec2.fromSwizzle=function(a,b,c){var d=gl3.ARRAY_TYPE(2);return d[0]=a[b],d[1]=a[c],d},vec2.swizzle=function(a,b,c,d){return a[0]=b[c],a[1]=b[d],a},vec2.one=function(){var a=gl3.ARRAY_TYPE(2);return a[0]=1,a[1]=1,a},vec3.fromScalar=function(a){var b=new gl3.ARRAY_TYPE(3);return b[0]=a,b[1]=a,b[2]=a,b},vec3.fromArray=function(a,b){var c=new gl3.ARRAY_TYPE(3);return b||(b=0),c[0]=a[b+0],c[1]=a[b+1],c[2]=a[b+2],c},vec3.setQuat=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*c,h=d*d,i=e*e,j=c*d+e*f;if(j>.499)return a[0]=0,a[1]=360/Math.PI*Math.atan2(c,f),a[2]=90,a;if(-.499>j)return a[0]=0,a[1]=-360/Math.PI*Math.atan2(c,f),a[2]=-90,a;var k=Math.atan2(2*d*f-2*c*e,1-2*h-2*i),l=Math.asin(2*c*d+2*e*f),m=Math.atan2(2*c*f-2*d*e,1-2*g-2*i);return a[0]=Math.round(180*m/Math.PI),a[1]=Math.round(180*k/Math.PI),a[2]=Math.round(180*l/Math.PI),a},vec3.fromQuat=function(a){var b=new gl3.ARRAY_TYPE(3);return vec3.setQuat(b,a),b},vec3.one=function(){var a=new gl3.ARRAY_TYPE(3);return a[0]=1,a[1]=1,a[2]=1,a},vec3.setScalar=function(a,b){return a[0]=b,a[1]=b,a[2]=b,a},vec3.fill=vec3.setScalar,vec3.setSpherical=function(a,b,c,d){var e=Math.sin(d)*b;return a[0]=e*Math.sin(c),a[1]=Math.cos(d)*b,a[2]=e*Math.cos(c),a},vec3.setTranslation=function(a,b){return a[0]=b[12],a[1]=b[13],a[2]=b[14],a},vec3.fromTranslation=function(a){var b=new gl3.ARRAY_TYPE(3);return b[0]=a[12],b[1]=a[13],b[2]=a[14],b},vec3.setScale=function(){var a;return function(b,c){return a||(a=vec3.create()),b[0]=vec3.length(vec3.setColumn(a,c,0)),b[1]=vec3.length(vec3.setColumn(a,c,1)),b[2]=vec3.length(vec3.setColumn(a,c,2)),b}}(),vec3.setColumn=function(a,b,c){return vec3.fromArray(a,b,4*c)},vec3.setArray=function(a,b,c){return void 0===c&&(c=0),a[0]=b[c+0],a[1]=b[c+1],a[2]=b[c+2],a},vec3.fromRGB=function(a,b){var c=new gl3.ARRAY_TYPE(3);return c[0]=a[0]/255,c[1]=a[1]/255,c[2]=a[2]/255,b||vec3.minScalar(c,c,1),c},vec3.fromRGBValues=function(a,b,c,d,e){var f=new gl3.ARRAY_TYPE(4);return f[0]=b/255,f[1]=c/255,f[2]=d/255,e||vec3.minScalar(f,f,1),f},vec3.setRGB=function(a,b,c){return a[0]=b[0]/255,a[1]=b[1]/255,a[2]=b[2]/255,c||vec3.minScalar(a,a,1),a},vec3.setRGBValues=function(a,b,c,d,e){return a[0]=b/255,a[1]=c/255,a[2]=d/255,e||vec3.minScalar(a,a,1),a},vec3.toRGB=function(a,b,c){return b||(b=[]),b[0]=Math.round(255*v),b[1]=Math.round(255*v),b[2]=Math.round(255*v),c||vec3.minScalar(b,b,255),b},vec3.addScalar=function(a,b,c){return a[0]=b[0]+=c,a[1]=b[1]+=c,a[2]=b[2]+=c,a},vec3.subtractScalar=function(a,b,c){return a[0]=b[0]-=c,a[1]=b[1]-=c,a[2]=b[2]-=c,a},vec3.subScalar=vec3.subtractScalar,vec3.multiplyScalar=function(a,b,c){return isFinite(c)?(a[0]=b[0]*=c,a[1]=b[1]*=c,a[2]=b[2]*=c):(a[0]=0,a[1]=0,a[2]=0),a},vec3.mulScalar=vec3.multiplyScalar,vec3.divideScalar=function(a,b,c){return vec3.multiplyScalar(a,b,1/c),a},vec3.divScalar=vec3.divideScalar,vec3.minScalar=function(a,b,c){return a[0]=Math.min(b[0],c),a[1]=Math.min(b[1],c),a[2]=Math.min(b[2],c),a},vec3.maxScalar=function(a,b,c){return a[0]=Math.max(b[0],c),a[1]=Math.max(b[1],c),a[2]=Math.max(b[2],c),a},vec3.roundToZero=function(a,b){return a[0]=b[0]<0?Math.ceil(b[0]):Math.floor(b[0]),a[1]=b[1]<0?Math.ceil(b[1]):Math.floor(b[1]),a[2]=b[2]<0?Math.ceil(b[2]):Math.floor(b[2]),a},vec3.clamp=function(a,b,c,d){return a[0]=Math.max(c[0],Math.min(d[0],b[0])),a[1]=Math.max(c[1],Math.min(d[1],b[1])),a[2]=Math.max(c[2],Math.min(d[2],b[2])),a},vec3.clampScalar=function(a,b,c,d){return a[0]=Math.max(c,Math.min(d,b[0])),a[1]=Math.max(c,Math.min(d,b[1])),a[2]=Math.max(c,Math.min(d,b[2])),a},vec3.lengthManhattan=function(a){return Math.abs(a[0])+Math.abs(a[1])+Math.abs(a[2])},vec3.lenMan=vec3.lengthManhattan,vec3.transformAxisAngle=function(){var a;return function(b,c,d){return void 0===a&&(a=quat.create()),quat.setAxisAngle(a,c,d),vec3.transformQuat(b,b,a),b}}(),vec3.projectOnVector=function(a,b,c){return vec3.multiplyScalar(a,b,vec3.dot(c,b)/vec3.squaredLength(c))},vec3.projectOnPlane=function(){var a;return function(b,c,d){return a||(a=vec3.create()),vec3.projectOnVector(a,c,d),vec3.subtract(b,c,a),b}}(),vec3.reflect=function(){var a;return function(b,c,d){return a||(a=vec3.create()),vec3.multiplyScalar(a,d,2*vec3.dot(c,d)),vec3.subtract(b,c,a),b}}(),vec3.project=function(){var a;return function(b,c,d,e){return a||(a=mat4.create()),mat4.inverse(a,e),mat4.multiply(a,d,a),vec3.transformProjection(b,c,a),b}}(),vec3.unproject=function(){var a;return function(b,c,d,e){a||(a=mat4.create()),mat4.inverse(a,d),mat4.multiply(a,e,a),vec3.transformProjection(b,c,a)}}(),vec3.transformProjection=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=1/(c[3]*d+c[7]*e+c[11]*f+c[15]);return a[0]=(c[0]*d+c[4]*e+c[8]*f+c[12])*g,a[1]=(c[1]*d+c[5]*e+c[9]*f+c[13])*g,a[2]=(c[2]*d+c[6]*e+c[10]*f+c[14])*g,a},vec3.fromSwizzle=function(a,b,c,d){var e=gl3.ARRAY_TYPE(3);return e[0]=a[b],e[1]=a[c],e[2]=a[d],e},vec3.swizzle=function(a,b,c,d,e){return a[0]=b[c],a[1]=b[d],a[2]=b[e],a},vec4.one=function(){var a=new gl3.ARRAY_TYPE(4);return a[0]=1,a[1]=1,a[2]=1,a[3]=1,a},vec4.fromScalar=function(a){var b=new gl3.ARRAY_TYPE(4);return b[0]=a,b[1]=a,b[2]=a,b[3]=a,b},vec4.setScalar=function(a,b){return a[0]=b,a[1]=b,a[2]=b,a[3]=b,a},vec4.fill=vec4.setScalar,vec4.addScalar=function(a,b,c){return a[0]=b[0]+=c,a[1]=b[1]+=c,a[2]=b[2]+=c,a[3]=b[3]+=c,a},vec4.subtractScalar=function(a,b,c){return a[0]=b[0]-=c,a[1]=b[1]-=c,a[2]=b[2]-=c,a[3]=b[3]-=c,a},vec4.subScalar=vec4.subtractScalar,vec4.multiplyScalar=function(a,b,c){return isFinite(c)?(a[0]=b[0]*=c,a[1]=b[1]*=c,a[2]=b[2]*=c,a[3]=b[3]*=c):(a[0]=0,a[1]=0,a[2]=0,a[3]=0),a},vec4.mulScalar=vec4.multiplyScalar,vec4.divideScalar=function(a,b,c){return vec4.multiplyScalar(a,b,1/c),a},vec4.divScalar=vec3.divideScalar,vec4.minScalar=function(a,b,c){return a[0]=Math.min(b[0],c),a[1]=Math.min(b[1],c),a[2]=Math.min(b[2],c),a[3]=Math.min(b[3],c),a},vec4.maxScalar=function(a,b,c){return a[0]=Math.max(b[0],c),a[1]=Math.max(b[1],c),a[2]=Math.max(b[2],c),a[3]=Math.max(b[3],c),a},vec4.fromArray=function(a,b){var c=new gl3.ARRAY_TYPE(4);return b||(b=0),c[0]=a[b+0],c[1]=a[b+1],c[2]=a[b+2],c[3]=a[b+3],c},vec4.setArray=function(a,b,c){return void 0===c&&(c=0),a[0]=b[c+0],a[1]=b[c+1],a[2]=b[c+2],a[3]=b[c+3],a},vec4.fromRGB=function(a,b){var c=new gl3.ARRAY_TYPE(4);return c[0]=a[0]/255,c[1]=a[1]/255,c[2]=a[2]/255,c[3]=1,b||vec3.minScalar(c,c,1),c},vec4.fromRGBValues=function(a,b,c,d,e){var f=new gl3.ARRAY_TYPE(4);return f[0]=b/255,f[1]=c/255,f[2]=d/255,f[3]=1,e||vec3.minScalar(f,f,1),f},vec4.setRGB=function(a,b,c){return a[0]=b[0]/255,a[1]=b[1]/255,a[2]=b[2]/255,a[3]=1,c||vec3.minScalar(a,a,1),a},vec4.setRGBValues=function(a,b,c,d,e){return a[0]=b/255,a[1]=c/255,a[2]=d/255,a[3]=1,e||vec3.minScalar(a,a,1),a},vec4.toRGB=function(a,b,c){return b||(b=[]),b[0]=Math.round(255*v),b[1]=Math.round(255*v),b[2]=Math.round(255*v),c||vec3.minScalar(b,b,255),b},vec4.roundToZero=function(a,b){return a[0]=b[0]<0?Math.ceil(b[0]):Math.floor(b[0]),a[1]=b[1]<0?Math.ceil(b[1]):Math.floor(b[1]),a[2]=b[2]<0?Math.ceil(b[2]):Math.floor(b[2]),a[3]=b[3]<0?Math.ceil(b[3]):Math.floor(b[3]),a},vec4.clamp=function(a,b,c,d){return a[0]=Math.max(c[0],Math.min(d[0],b[0])),a[1]=Math.max(c[1],Math.min(d[1],b[1])),a[2]=Math.max(c[2],Math.min(d[2],b[2])),a[3]=Math.max(c[3],Math.min(d[3],b[3])),a},vec4.clampScalar=function(a,b,c,d){return a[0]=Math.max(c,Math.min(d,b[0])),a[1]=Math.max(c,Math.min(d,b[1])),a[2]=Math.max(c,Math.min(d,b[2])),a[3]=Math.max(c,Math.min(d,b[3])),a},vec4.lengthManhattan=function(a){return Math.abs(a[0])+Math.abs(a[1])+Math.abs(a[2])+Math.abs(a[3])},vec4.lenMan=vec4.lengthManhattan,vec4.fromSwizzle=function(a,b,c,d,e){var f=gl3.ARRAY_TYPE(4);return f[0]=a[b],f[1]=a[c],f[2]=a[d],f[3]=a[e],f},vec4.swizzle=function(a,b,c,d,e,f){return a[0]=b[c],a[1]=b[d],a[2]=b[e],a[3]=b[f],a},quat.zero=function(){var a=new gl3.ARRAY_TYPE(4);return a},quat.fromVec3=function(a){var b=new gl3.ARRAY_TYPE(4);return quat.setVec3(b,a),b},quat.setVec3=function(a,b){var c=b[0]*Math.PI/360,d=b[1]*Math.PI/360,e=b[2]*Math.PI/360,f=Math.cos(d),g=Math.cos(e),h=Math.cos(c),i=Math.sin(d),j=Math.sin(e),k=Math.sin(c);return a[0]=Math.round(1e5*(i*j*h+f*g*k))/1e5,a[1]=Math.round(1e5*(i*g*h+f*j*k))/1e5,a[2]=Math.round(1e5*(f*j*h-i*g*k))/1e5,a[3]=Math.round(1e5*(f*g*h-i*j*k))/1e5,a},quat.setUnitVectors=function(a,b,c){var d=vec3.dot(b,c)+1;return d<gl3.EPSILON?Math.abs(b[0])>Math.abs(b[2])?quat.set(a,-b[1],b[0],0,0):quat.set(a,0,-b[2],b[1],0):(vec3.cross(a,b,c),a[3]=d),quat.normalize(a)},quat.transformVec3=function(a,b,c){var d=c[0],e=c[1],f=c[2],g=b[0],h=b[1],i=b[2],j=b[3],k=j*d+h*f-i*e,l=j*e+i*d-g*f,m=j*f+g*e-h*d,n=-g*d-h*e-i*f;return a[0]=k*j+n*-g+l*-i-m*-h,a[1]=l*j+n*-h+m*-g-k*-i,a[2]=m*j+n*-i+k*-h-l*-g,a},quat.fromMat4=function(a){var b=new gl3.ARRAY_TYPE(4);return mat4.getRotation(b,a)},quat.fromArray=vec4.fromArray,quat.setArray=vec4.setArray,quat.fill=vec4.fill,quat.one=vec3.one,mat3.fromArray=function(a,b){var c=new gl3.ARRAY_TYPE(9);return b||(b=0),c[0]=a[b+0],c[1]=a[b+1],c[2]=a[b+2],c[3]=a[b+3],c[4]=a[b+4],c[5]=a[b+5],c[6]=a[b+6],c[7]=a[b+7],c[8]=a[b+8],c},mat3.setArray=function(a,b,c){return c||(c=0),a[0]=b[c+0],a[1]=b[c+1],a[2]=b[c+2],a[3]=b[c+3],a[4]=b[c+4],a[5]=b[c+5],a[6]=b[c+6],a[7]=b[c+7],a[8]=b[c+8],a},mat3.toArray=function(a,b,c){return b||(b=[]),c||(c=0),b[c+0]=a[0],b[c+1]=a[1],b[c+2]=a[2],b[c+3]=a[3],b[c+4]=a[4],b[c+5]=a[5],b[c+6]=a[6],b[c+7]=a[7],b[c+8]=a[8],b},mat3.zero=function(){var a=new gl3.ARRAY_TYPE(9);return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=0,a[6]=0,a[7]=0,a[8]=0,a},mat4.copyTranslation=function(a,b){return a[12]=b[12],a[13]=b[13],a[14]=b[14],a},mat4.setTranslation=function(a,b){return a[12]=b[0],a[13]=b[1],a[14]=b[2],a},mat4.getBasis=function(a,b,c,d){vec3.setColumn(b,a,0),vec3.setColumn(c,a,1),vec3.setColumn(d,a,2)},mat4.fromBasis=function(a,b,c){var d=new gl3.type(16);return d[0]=a[0],d[1]=b[0],d[2]=c[0],d[3]=0,d[4]=a[1],d[5]=b[1],d[6]=c[1],d[7]=0,d[8]=a[2],d[9]=b[2],d[10]=b[2],d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d},mat4.setBasis=function(a,b,c,d){return a[0]=b[0],a[1]=c[0],a[2]=d[0],a[3]=0,a[4]=b[1],a[5]=c[1],a[6]=d[1],a[7]=0,a[8]=b[2],a[9]=c[2],a[10]=c[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},mat4.setBasisAxes=function(a,b,c,d){return a[0]=b[0],a[1]=c[0],a[2]=d[0],a[4]=b[1],a[5]=c[1],a[6]=d[1],a[8]=b[2],a[9]=c[2],a[10]=c[2],a},mat4.maxScaleOnAxis=function(a){var b=a[0]*a[0]+a[1]*a[1]+a[2]*a[2],c=a[4]*a[4]+a[5]*a[5]+a[6]*a[6],d=a[8]*a[8]+a[9]*a[9]+a[10]*a[10];return Math.sqrt(Math.max(b,c,d))},mat4.decompose=function(){var a,b;return function(c,d,e,f){a||(a=vec3.create()),b||(b=mat3.create()),d[0]=c[12],d[1]=c[13],d[2]=c[14];var g=vec3.length(vec3.set(a,c[0],c[1],c[2])),h=vec3.length(vec3.set(a,c[4],c[5],c[6])),i=vec3.length(vec3.set(a,c[8],c[9],c[10])),j=mat4.determinant(c);0>j&&(g=-g),f[0]=g,f[1]=h,f[2]=i,b.set(c);var k=1/g,l=1/h,m=1/i;b[0]*=k,b[1]*=k,b[2]*=k,b[4]*=l,b[5]*=l,b[6]*=l,b[8]*=m,b[9]*=m,b[10]*=m,quat.fromMat3(e,b),quat.transpose(e,e)}}(),mat4.fromArray=function(a,b){var c=new gl3.ARRAY_TYPE(16);return b||(b=0),c[0]=a[b+0],c[1]=a[b+1],c[2]=a[b+2],c[3]=a[b+3],c[4]=a[b+4],c[5]=a[b+5],c[6]=a[b+6],c[7]=a[b+7],c[8]=a[b+8],c[9]=a[b+9],c[10]=a[b+10],c[11]=a[b+11],c[12]=a[b+12],c[13]=a[b+13],c[14]=a[b+14],c[15]=a[b+15],c},mat4.setArray=function(a,b,c){return c||(c=0),a[0]=b[c+0],a[1]=b[c+1],a[2]=b[c+2],a[3]=b[c+3],a[4]=b[c+4],a[5]=b[c+5],a[6]=b[c+6],a[7]=b[c+7],a[8]=b[c+8],a[9]=b[c+9],a[10]=b[c+10],a[11]=b[c+11],a[12]=b[c+12],a[13]=b[c+13],a[14]=b[c+14],a[15]=b[c+15],a},mat4.toArray=function(a,b,c){return b||(b=[]),c||(c=0),b[c+0]=a[0],b[c+1]=a[1],b[c+2]=a[2],b[c+3]=a[3],b[c+4]=a[4],b[c+5]=a[5],b[c+6]=a[6],b[c+7]=a[7],b[c+8]=a[8],b[c+9]=a[9],b[c+10]=a[10],b[c+11]=a[11],b[c+12]=a[12],b[c+13]=a[13],b[c+14]=a[14],b[c+15]=a[15],b},mat4.zero=function(){var a=new gl3.ARRAY_TYPE(16);return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=0,a},mat4.setMat3=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=0,a[4]=b[3],a[5]=b[4],a[6]=b[5],a[7]=0,a[8]=b[6],a[9]=b[7],a[10]=b[8],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},mat4.arcFromForward=function(b,c){var d=new gl3.ARRAY_TYPE(3),e=c[0],f=c[1],g=c[2],h=e*e+f*f+g*g;if(h>0&&(h=1/Math.sqrt(h),d[0]=a[0]*h,d[1]=a[1]*h,d[2]=a[2]*h),b[0]=b[5]=b[10]=b[15]=1,b[1]=b[2]=b[3]=b[4]=0,b[6]=b[7]=b[8]=b[9]=0,b[11]=b[12]=b[13]=b[14]=0,!(d[2]<-.99999)){if(d[2]>.99999)return b[5]=-1,void(b[10]=-1);var i=(1+d[2])/(d[0]*d[0]+d[1]*d[1]);return b[0]=i*d[1]*d[1]-d[2],b[1]=-i*d[0]*d[1],b[2]=d[0],b[4]=b[1],b[5]=i*d[0]*d[0]-d[2],b[6]=d[1],b[8]=-d[0],b[9]=-d[1],b[10]=-d[2],b}},mat4.perspectiveGL=function(a,b,c,d,e){var f,g,h=Math.PI;g=Math.tan(b/360*h)*d,f=g*c,mat4.frustum(a,-f,f,-g,g,d,e)};var box={},sph={},tri={},ray={};